<!DOCTYPE html>
<html>
  <head>
    <title>VexFlow - JavaScript Music Notation and Guitar Tab</title>
    <link rel="stylesheet" href="flow.css" type="text/css" media="screen" />

    <!-- Test Dependencies: jQuery, QUnit -->
    <link rel="stylesheet" href="support/qunit.css" type="text/css" media="screen" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@500&display=swap" rel="stylesheet" />
    <script src="support/jquery.js"></script>
    <script src="support/qunit.js"></script>

    <script>
      function loadScript(url) {
        return new Promise(function (resolve, reject) {
          var script = document.createElement('script');
          script.onload = resolve;
          script.onerror = reject;
          script.src = url;
          // The utf-8 charset is required for the measureText cache, since the index contains weird unicode characters.
          script.charset = 'utf-8';
          document.getElementsByTagName('head')[0].appendChild(script);
        });
      }

      $(function () {
        var urlParams = new URLSearchParams(window.location.search);
        var ver = urlParams.get('ver') || 'build';
        var vexSrcURL = '../' + ver + '/vexflow-debug.js';
        var vexTestsURL = '../' + ver + '/vexflow-tests.js';

        loadScript(vexSrcURL)
          .then(function () {
            return loadScript(vexTestsURL);
          })
          .then(function () {
            // Show only failed tests.
            QUnit.config.hidepassed = true;
            QUnit.config.noglobals = true;
            VF.Test.run();
          });
      });
    </script>
  </head>

  <body>
    <div style="text-align: center">
      <div id="qunit"></div>
      <div id="qunit-fixture"></div>
      <div>
        <h2>[ <a href="http://vexflow.com">Home</a> ] [ <a href="http://github.com/0xfe/vexflow">GitHub</a> ]</h2>
        <h3>
          Don't forget to run the
          <a href="https://github.com/0xfe/vexflow/wiki/Visual-Regression-Tests">Visual Regression Tests</a>!
        </h3>
      </div>
      <p>&nbsp;</p>
      <div id="vexflow_testoutput"></div>
      <p>&nbsp;</p>
      <p class="vf-footer">
        [ <a href="http://vexflow.com">home</a> ] [ <a href="http://github.com/0xfe/vexflow">github</a> ] [
        <a href="http://0xfe.muthanna.com">0xfe</a> ]
      </p>
    </div>
  </body>
</html>
